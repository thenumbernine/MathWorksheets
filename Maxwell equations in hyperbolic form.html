<!doctype html>
<html>
	<head>
        <meta charset='utf-8'>
		<script type='text/javascript' src='tryToFindMathJax.js'></script>
		<title>Maxwell Equations as Hyperbolic Conservation Laws</title>
	</head>
	<body onload='tryToFindMathJax();'>

<h3>Maxwell Equations of charge in vacuum</h3>
$B_{x,x} + B_{y,y} + B_{z,z} = 0$<br>
$\epsilon_0 (E_{x,x} + E_{y,y} + E_{z,z}) = \rho_{charge}$<br>
$\epsilon_0 E_{x,t} - \frac{1}{\mu_0} B_{z,y} + \frac{1}{\mu_0} B_{y,z} = -j_x$<br>
$\epsilon_0 E_{y,t} - \frac{1}{\mu_0} B_{x,z} + \frac{1}{\mu_0} B_{z,x} = -j_y$<br>
$\epsilon_0 E_{z,t} - \frac{1}{\mu_0} B_{y,x} + \frac{1}{\mu_0} B_{x,y} = -j_z$<br>
$B_{x,t} + E_{z,y} - E_{y,z} = 0$<br>
$B_{y,t} + E_{x,z} - E_{z,x} = 0$<br>
$B_{z,t} + E_{y,x} - E_{x,y} = 0$<br>
<br>

<h3>in vector notation:</h3>
$\partial_t \left[ \begin{matrix}
	\epsilon_0 E_x \\
	\epsilon_0 E_y \\
	\epsilon_0 E_z \\
	B_x \\
	B_y \\
	B_z
\end{matrix} \right] + \nabla \cdot \left[\begin{matrix}
	0 & -\frac{1}{\mu_0} B_z & \frac{1}{\mu_0} B_y \\
	\frac{1}{\mu_0} B_z & 0 & -\frac{1}{\mu_0} B_x \\
	-\frac{1}{\mu_0} B_y & \frac{1}{\mu_0} B_x & 0 \\
	0 & E_z & -E_y \\
	-E_z & 0 & E_x \\
	E_y & -E_x & 0
\end{matrix}\right] = \left[\begin{matrix}
-j_x \\
-j_y \\
-j_z \\
0 \\
0 \\
0
\end{matrix}\right]$<br>

<h3>in index notation:</h3>
$B_{i,i} = 0$<br>
$B_{i,t} + {\epsilon_i}^{jk} E_{k,j} = 0$<br>
<br>
$E_{i,i} = \frac{1}{\epsilon_0} \rho_{charge}$<br>
$(\epsilon_0 E)_{i,t} - {\epsilon_i}^{jk} (\frac{1}{\mu_0} B)_{k,j} = -j_i$<br>
<br>
$j_i = \sigma E_i = $ current density<br>
$\sigma = $ electric conductivity<br>
<br>

conservative variables:<br>
$U_i = \left[\matrix{
	\epsilon_0 E_i \\
	B_i
}\right]$<br>
<br>

conservative form:<br>
$U_i + A_{ijk} U_{k,j} = S_i$<br>
<br>

index/matrix form:<br>
$\left[\matrix{
	\epsilon_0 E_i \\
	B_i
}\right] + \left[\matrix{
	0 & - \frac{1}{\mu_0} {\epsilon_i}^{jk} \\
	\frac{1}{\epsilon_0} {\epsilon_i}^{jk} & 0
}\right] 
\left[\matrix{
	\epsilon_0 E_k \\
	B_k
}\right]_{,j}
= \left[\matrix{
	-j_i \\
	0
}\right]$<br>
<br>

$A_x = \left[\matrix{
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & \frac{1}{\mu_0} \\
	0 & 0 & 0 & 0 & -\frac{1}{\mu_0} & 0 \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & -\frac{1}{\epsilon_0} & 0 & 0 & 0 \\
	0 & \frac{1}{\epsilon_0} & 0 & 0 & 0 & 0
}\right]$<br>
<br>

$A_y = \left[\matrix{
	0 & 0 & 0 & 0 & 0 & -\frac{1}{\mu_0} \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & \frac{1}{\mu_0} & 0 & 0 \\
	0 & 0 & \frac{1}{\epsilon_0} & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	-\frac{1}{\epsilon_0} & 0 & 0 & 0 & 0 & 0
}\right]$<br>
<br>

$A_z = \left[\matrix{
	0 & 0 & 0 & 0 & \frac{1}{\mu_0} & 0 \\
	0 & 0 & 0 & -\frac{1}{\mu_0} & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & -\frac{1}{\epsilon_0} & 0 & 0 & 0 & 0 \\
	\frac{1}{\epsilon_0} & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & 0
}\right]$<br>
<br>

eigen decomposition:<br>
$A_j = Q \Lambda Q^{-1}$<br>
<br>
for the $\hat{x}$-direction, with $\hat{x}, \hat{y}, \hat{z}$ forming a basis:<br>
$Q = \left[\matrix{
	\sqrt{\epsilon_0} \hat{y} & 
		\sqrt{\epsilon_0} \hat{z} & 
		\sqrt{\epsilon_0} \hat{x} & 
		0 & 
		\sqrt{\epsilon_0} \hat{y} & 
		-\sqrt{\epsilon_0} \hat{z} \\
	-\sqrt{\mu_0} \hat{z} & 
		\sqrt{\mu_0} \hat{y} & 
		0 & 
		\sqrt{\mu_0} \hat{x} & 
		\sqrt{\mu_0} \hat{z} & 
		-\sqrt{\mu_0} \hat{y}
}\right]$<br>
<br>

$Q^-1 = \left[\matrix{
	\hat{z} & \hat{x} & \hat{y} & 0 & \hat{y} & -\hat{x} \\
	0 & \hat{y} & \hat[z] & \hat{x} & -\hat{z} & \hat{y}
}\right]$<br>
<br>

$\Lambda = \left[\matrix{
	-\frac{1}{\sqrt{\epsilon_0 \mu_0}} & 0 & 0 & 0 & 0 & 0 \\
	0 & -\frac{1}{\sqrt{\epsilon_0 \mu_0}} & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & 0 & 0 \\
	0 & 0 & 0 & 0 & \frac{1}{\sqrt{\epsilon_0 \mu_0}} & 0 \\
	0 & 0 & 0 & 0 & 0 & \frac{1}{\sqrt{\epsilon_0 \mu_0}}
}\right]$<br>
<br>

<h3>curved space, contravariant form:</h3>
${U^i}_{,t} + {F^{ij}}_{;j} = S^i$<br>
<br>
$\epsilon_0 {E^i}_{,t} - \frac{1}{\mu_0} {\epsilon^{ij}}_k {B^k}_{;j} = -j^i$<br>
${B^i}_{,t} + {\epsilon^{ij}}_k {E^k}_{;j} = 0$<br>
<br>
$\epsilon_0 {E^i}_{,t} - \frac{1}{\mu_0} {\epsilon^{ij}}_k ({B^k}_{,j} + {\Gamma^k}_{lj} B^l) = -j^i$<br>
${B^i}_{,t} + {\epsilon^{ij}}_k ({E^k}_{,j} + {\Gamma^k}_{lj} E^l) = 0$<br>
<br>
$\epsilon_0 {E^i}_{,t} - \frac{1}{\mu_0} {\epsilon^{ij}}_k {B^k}_{,j} = -j^i + \frac{1}{\mu_0} {\epsilon^{ij}}_k {\Gamma^k}_{lj} B^l$<br>
${B^i}_{,t} + {\epsilon^{ij}}_k {E^k}_{,j} = -{\epsilon^{ij}}_k {\Gamma^k}_{lj} E^l$<br>
<br>
$\epsilon_0 {E^i}_{,t} - \frac{1}{\mu_0} \frac{1}{\sqrt{g}} [ijk] g_{kl} {B^l}_{,j} = -j^i + \frac{1}{\mu_0} \frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} B^m$<br>
${B^i}_{,t} + \frac{1}{\sqrt{g}} [ijk] g_{kl} {E^l}_{,j} = -\frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} E^m$<br>
<br>
$\left[\matrix{
	\epsilon_0 E^i \\
	B^i
}\right]_{,t}
+ \frac{1}{\sqrt{g}} \left[\matrix{
	0 & - \frac{1}{\mu_0} [ijk] g_{kl} \\ 
	\frac{1}{\epsilon_0} [ijk] g_{kl} & 0
}\right]
\left[\matrix{
	\epsilon_0 E^l \\
	B^l
}\right]_{,j}
= \left[\matrix{
	-j^i + \frac{1}{\mu_0} \frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} B^m \\
	-\frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} E^m
}\right]$<br>
<br>

At this point it looks like I don't need to weight the flux by any power of the metric determinant ... unlike the Euler fluid equations in curved space, which are weighted by the volume ($\sqrt{g}$).<br>
I've also noticed that various numerical relativity integrators will be weighted by either nothing, $\alpha$, $\sqrt{det(\gamma_{ij})}$ or both.<br>
Maybe I sould make my flux weight a property of the equation?<br> 
If not -- and if I wanted to weight all fluxes by the grid volume -- this is what needs to happen:<br>
<br>

$\left[\matrix{
	\epsilon_0 E^i \\
	B^i
}\right]_{,t}
+ \frac{1}{\sqrt{g}} \left[\matrix{
	0 & - \frac{1}{\mu_0} [ijk] g_{kl} \\ 
	\frac{1}{\epsilon_0} [ijk] g_{kl} & 0
}\right]
\left[\matrix{
	\epsilon_0 E^l \\
	B^l
}\right]_{,j}
+ \frac{\sqrt{g}_{,j}}{\sqrt{g}} \left[\matrix{
	-\frac{1}{\mu_0} {\epsilon^{ij}}_k B^k \\
	{\epsilon^{ij}}_k E^k
}\right]
= \left[\matrix{
	-j^i + \frac{1}{\mu_0} \frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} B^m \\
	-\frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} E^m
}\right]

+ \frac{\sqrt{g}_{,j}}{\sqrt{g}} \left[\matrix{
	-\frac{1}{\mu_0} {\epsilon^{ij}}_k B^k \\
	{\epsilon^{ij}}_k E^k
}\right]

$<br>
<br>

$\left[\matrix{
	\epsilon_0 E^i \\
	B^i
}\right]_{,t}

+ \frac{1}{\sqrt{g}} \left( \sqrt{g} F^{ij} \right)_{,j}

= \left[\matrix{
	-j^i + \frac{1}{\mu_0} \frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} B^m \\
	-\frac{1}{\sqrt{g}} [ijk] g_{kl} {\Gamma^l}_{mj} E^m
}\right]

+ {\Gamma^l}_{jl} \left[\matrix{
	-\frac{1}{\mu_0} {\epsilon^{ij}}_k B^k \\
	{\epsilon^{ij}}_k E^k
}\right]

$<br>
<br>
Notice the last ${\Gamma^l}_{jl}$ term is only to counteract the scaling of the flux by $\sqrt{g}$.<br>
So if I was to not scale the flux by the volume then I could leave this term out.<br>


<br>

	</body>
</html>
